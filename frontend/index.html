<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trivion - Quiz Distribu√≠do</title>
    <meta name="description"
        content="Sistema de quiz em tempo real para apresenta√ß√£o acad√™mica de Sistemas Distribu√≠dos">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">

    <!-- Socket.IO Client -->
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="/css/styles.css">
</head>

<body>
    <div id="app">
        <!-- STARFIELD BACKGROUND (Rotating like Minecraft title screen) -->
        <div class="starfield">
            <!-- Layers de Estrelas (Box Shadow) -->
            <div class="stars-1"></div>
            <div class="stars-2"></div>
            <div class="stars-3"></div>

            <!-- Corpos Celestes (Physical Divs) -->
            <div class="celestial-body planet-blue"></div>
            <div class="celestial-body planet-red"></div>
            <div class="celestial-body planet-purple"></div>
            <div class="celestial-body galaxy-spiral"></div>
            <div class="celestial-body nebula"></div>
        </div>
        <div class="space-gradient"></div>

        <!-- CONTENT WRAPPER -->
        <div class="content">

            <!-- ============================================== -->
            <!-- TELA 0: LOBBY DE SALAS -->
            <!-- ============================================== -->
            <div id="screen-rooms" class="screen active">
                <div class="rooms-container">
                    <div class="logo">
                        <h1 class="logo-text">TRIVION</h1>
                        <p class="logo-subtitle">Quiz Multiplayer</p>
                    </div>

                    <div class="rooms-actions">
                        <button id="btn-create-room" class="btn-primary">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 5v14M5 12h14" />
                            </svg>
                            <span>Criar Sala</span>
                        </button>
                        <button id="btn-enter-code" class="btn-secondary">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4M10 17l5-5-5-5M13.8 12H3" />
                            </svg>
                            <span>Entrar com C√≥digo</span>
                        </button>
                    </div>

                    <div class="rooms-list-section">
                        <h2>Salas</h2>
                        <div id="rooms-list" class="rooms-list">
                            <p class="no-rooms">Carregando salas...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal Criar Sala -->
            <div id="modal-create-room" class="modal hidden">
                <div class="modal-backdrop"></div>
                <div class="modal-content">
                    <h2>Criar Nova Sala</h2>
                    <div class="form-group">
                        <label for="input-room-name">Nome da Sala</label>
                        <input type="text" id="input-room-name" placeholder="Ex: Quiz de Hist√≥ria" maxlength="50">
                    </div>
                    <div class="form-group">
                        <label>Visibilidade</label>
                        <div class="toggle-group">
                            <button type="button" id="btn-public" class="toggle-btn active">P√∫blica</button>
                            <button type="button" id="btn-private" class="toggle-btn">Privada</button>
                        </div>
                    </div>
                    <div class="form-group hidden" id="password-group">
                        <label for="input-room-password">Senha da Sala</label>
                        <input type="password" id="input-room-password" placeholder="Digite a senha">
                    </div>
                    <div id="create-room-error" class="error-message hidden"></div>
                    <div class="modal-actions">
                        <button id="btn-cancel-create" class="btn-secondary">Cancelar</button>
                        <button id="btn-confirm-create" class="btn-primary filled">Criar Sala</button>
                    </div>
                </div>
            </div>

            <!-- Modal Entrar com C√≥digo -->
            <div id="modal-enter-room" class="modal hidden">
                <div class="modal-backdrop"></div>
                <div class="modal-content">
                    <h2>Entrar na Sala</h2>
                    <div class="form-group">
                        <label for="input-enter-code">C√≥digo da Sala</label>
                        <input type="text" id="input-enter-code" placeholder="ABC123" maxlength="6">
                    </div>
                    <div class="form-group">
                        <label for="input-enter-password">Senha da Sala</label>
                        <input type="password" id="input-enter-password" placeholder="Digite a senha (se necess√°rio)">
                    </div>
                    <div id="enter-room-error" class="error-message hidden"></div>
                    <div class="modal-actions">
                        <button id="btn-cancel-enter-room" class="btn-secondary">Cancelar</button>
                        <button id="btn-confirm-enter-room" class="btn-primary filled">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- Modal Senha Sala Privada -->
            <div id="modal-enter-password" class="modal hidden">
                <div class="modal-backdrop"></div>
                <div class="modal-content">
                    <h2>üîí Sala Privada</h2>
                    <p id="password-room-name" style="color: var(--text-secondary); margin-bottom: 1rem;"></p>
                    <div class="form-group">
                        <label for="input-password">Senha da Sala</label>
                        <input type="password" id="input-password" placeholder="Digite a senha">
                    </div>
                    <div id="password-error" class="error-message hidden" style="margin-bottom: 1rem;"></div>
                    <div class="modal-actions">
                        <button id="btn-cancel-password" class="btn-secondary">Cancelar</button>
                        <button id="btn-confirm-password" class="btn-primary filled">Entrar</button>
                    </div>
                </div>
            </div>

            <!-- ============================================== -->
            <!-- TELA 1: ENTRADA (JOIN - nome do jogador) -->
            <!-- ============================================== -->
            <div id="screen-join" class="screen">
                <div class="join-container">
                    <div class="logo">
                        <h1 class="logo-text">TRIVION</h1>
                        <p class="logo-subtitle" id="room-code-display">Entrar na Sala</p>
                    </div>

                    <div class="join-form">
                        <button id="btn-back" class="btn-back">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                            Voltar
                        </button>
                        <input type="text" id="player-name" placeholder="Digite seu nome" maxlength="15"
                            autocomplete="off">
                        <button id="btn-join" class="btn-primary">
                            <span>Entrar</span>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>

                    <div id="join-error" class="error-message hidden"></div>
                </div>
            </div>


            <!-- ============================================== -->
            <!-- TELA 1.1: EDITOR DE PERGUNTAS -->
            <!-- ============================================== -->
            <div id="screen-question-editor" class="screen">
                <div class="editor-container">
                    <div class="editor-header">
                        <div>
                            <h2>Editor de Perguntas</h2>
                            <p class="editor-subtitle">C√≥digo da sala: <span id="editor-room-code">CODE</span></p>
                        </div>
                        <div class="editor-actions">
                            <span id="questions-count-badge" class="badge">0 Perguntas</span>
                            <button id="btn-finish-editor" class="btn-primary filled">Concluir e Jogar</button>
                        </div>
                    </div>

                    <div class="editor-content">
                        <!-- Formul√°rio -->
                        <div class="question-form card">
                            <div class="form-group">
                                <label>Pergunta</label>
                                <textarea id="edit-question-text" rows="2"
                                    placeholder="Digite a pergunta..."></textarea>
                            </div>

                            <div class="options-form-grid">
                                <div class="form-group">
                                    <label class="label-opt-a">Op√ß√£o A</label>
                                    <input type="text" id="edit-opt-a" placeholder="Resposta A">
                                </div>
                                <div class="form-group">
                                    <label class="label-opt-b">Op√ß√£o B</label>
                                    <input type="text" id="edit-opt-b" placeholder="Resposta B">
                                </div>
                                <div class="form-group">
                                    <label class="label-opt-c">Op√ß√£o C</label>
                                    <input type="text" id="edit-opt-c" placeholder="Resposta C">
                                </div>
                                <div class="form-group">
                                    <label class="label-opt-d">Op√ß√£o D</label>
                                    <input type="text" id="edit-opt-d" placeholder="Resposta D">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label>Correta</label>
                                    <select id="edit-correct">
                                        <option value="0">Op√ß√£o A</option>
                                        <option value="1">Op√ß√£o B</option>
                                        <option value="2">Op√ß√£o C</option>
                                        <option value="3">Op√ß√£o D</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Tempo (s)</label>
                                    <input type="number" id="edit-time" value="20" min="5" max="60">
                                </div>
                                <button id="btn-add-question" class="btn-secondary">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 5v14M5 12h14" />
                                    </svg>
                                    Adicionar
                                </button>
                            </div>
                        </div>

                        <!-- Lista -->
                        <div class="questions-list-preview">
                            <h3>Perguntas Adicionadas</h3>
                            <div id="editor-questions-list" class="list-scroll">
                                <p class="empty-msg">Nenhuma pergunta adicionada ainda.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ============================================== -->
            <!-- TELA 2: LOBBY (SALA DE ESPERA) -->
            <!-- ============================================== -->
            <div id="screen-lobby" class="screen">
                <div class="lobby-container">
                    <h2 class="lobby-title">Sala de Espera</h2>
                    <p class="lobby-subtitle">Aguardando o apresentador iniciar o jogo...</p>

                    <div class="players-grid" id="players-list">
                        <!-- Jogadores ser√£o inseridos aqui via JS -->
                    </div>

                    <div class="player-count">
                        <span id="player-count">0</span> jogadores conectados
                    </div>
                </div>
            </div>

            <!-- ============================================== -->
            <!-- TELA 2B: AGUARDANDO PR√ìXIMA PARTIDA -->
            <!-- ============================================== -->
            <div id="screen-espera" class="screen">
                <div class="waiting-container">
                    <div class="waiting-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <path d="M12 6v6l4 2" />
                        </svg>
                    </div>
                    <h2 class="waiting-title">Aguardando pr√≥xima partida</h2>
                    <p class="waiting-subtitle">Uma partida est√° em andamento. Voc√™ entrar√° automaticamente quando
                        terminar.</p>
                </div>
            </div>

            <!-- ============================================== -->
            <!-- TELA 3: COUNTDOWN (3-2-1) -->
            <!-- ============================================== -->
            <div id="screen-countdown" class="screen">
                <div class="countdown-container">
                    <div class="countdown-number" id="countdown-number">3</div>
                    <p class="countdown-text">Prepare-se!</p>
                </div>
            </div>

            <!-- ============================================== -->
            <!-- TELA 4: PERGUNTA -->
            <!-- ============================================== -->
            <div id="screen-question" class="screen">
                <div class="question-container">
                    <!-- Header com timer e progresso -->
                    <div class="question-header">
                        <div class="progress-info">
                            <span id="question-progress">1/10</span>
                        </div>
                        <div class="timer-container">
                            <div class="timer-circle" id="timer-circle">
                                <svg viewBox="0 0 100 100">
                                    <circle class="timer-bg" cx="50" cy="50" r="45" />
                                    <circle class="timer-progress" cx="50" cy="50" r="45" id="timer-progress" />
                                </svg>
                                <span class="timer-text" id="timer-text">20</span>
                            </div>
                        </div>
                    </div>

                    <!-- Pergunta -->
                    <div class="question-text" id="question-text">
                        Qual protocolo permite comunica√ß√£o bidirecional em tempo real?
                    </div>

                    <!-- Op√ß√µes de resposta -->
                    <div class="options-grid">
                        <button class="option-btn option-a" data-index="0">
                            <span class="option-icon">‚ñ≤</span>
                            <span class="option-text" id="option-0">Op√ß√£o A</span>
                        </button>
                        <button class="option-btn option-b" data-index="1">
                            <span class="option-icon">‚óÜ</span>
                            <span class="option-text" id="option-1">Op√ß√£o B</span>
                        </button>
                        <button class="option-btn option-c" data-index="2">
                            <span class="option-icon">‚óè</span>
                            <span class="option-text" id="option-2">Op√ß√£o C</span>
                        </button>
                        <button class="option-btn option-d" data-index="3">
                            <span class="option-icon">‚ñ†</span>
                            <span class="option-text" id="option-3">Op√ß√£o D</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- ============================================== -->
            <!-- TELA 5: AGUARDANDO -->
            <!-- ============================================== -->
            <div id="screen-waiting" class="screen">
                <div class="waiting-container">
                    <div class="waiting-icon" id="waiting-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <path d="M12 6v6l4 2" />
                        </svg>
                    </div>
                    <h2 class="waiting-title">Resposta enviada!</h2>
                    <p class="waiting-subtitle">Aguardando outros jogadores...</p>
                    <div class="answered-count">
                        <span id="answered-count">0</span>/<span id="total-players">0</span> responderam
                    </div>
                </div>
            </div>

            <!-- ============================================== -->
            <!-- TELA 6: RESULTADO DA PERGUNTA -->
            <!-- ============================================== -->
            <div id="screen-result" class="screen">
                <div class="result-container">
                    <div class="result-feedback" id="result-feedback">
                        <!-- √çcone de correto/errado -->
                    </div>

                    <div class="result-info">
                        <div class="result-answer" id="result-answer">Resposta correta: WebSocket</div>
                        <div class="result-points" id="result-points">+850 pontos</div>
                        <div class="result-time" id="result-time">Tempo: 3.2s</div>
                    </div>

                    <div class="result-ranking">
                        <h3>Ranking Atual</h3>
                        <ol class="ranking-list" id="result-ranking">
                            <!-- Ranking ser√° inserido via JS -->
                        </ol>
                    </div>
                </div>
            </div>

            <!-- ============================================== -->
            <!-- TELA 7: DRUMROLL (SUSPENSE) -->
            <!-- ============================================== -->
                <div id="screen-drumroll" class="screen">
                    <div class="drumroll-container">
                        <div class="drumroll-emoji">ü•Å</div>
                        <h2 class="drumroll-title" id="drumroll-text">E o vencedor √©...</h2>
                        <div class="drumroll-dots">
                            <span></span><span></span><span></span>
                        </div>
                    </div>
                </div>

                <!-- ============================================== -->
                <!-- TELA 8: P√ìDIO ANIMADO -->
                <!-- ============================================== -->
                <div id="screen-podium" class="screen">
                    <div class="podium-container">
                        <h2 class="podium-title">üèÜ P√ìDIO üèÜ</h2>

                        <div class="podium">
                            <!-- 2¬∫ Lugar -->
                            <div class="podium-place second hidden" id="podium-2">
                                <div class="podium-avatar">ü•à</div>
                                <div class="podium-name">-</div>
                                <div class="podium-score">0 pts</div>
                                <div class="podium-bar"></div>
                                <div class="podium-position">2</div>
                            </div>

                            <!-- 1¬∫ Lugar -->
                            <div class="podium-place first hidden" id="podium-1">
                                <div class="podium-avatar">ü•á</div>
                                <div class="podium-name">-</div>
                                <div class="podium-score">0 pts</div>
                                <div class="podium-bar"></div>
                                <div class="podium-position">1</div>
                            </div>

                            <!-- 3¬∫ Lugar -->
                            <div class="podium-place third hidden" id="podium-3">
                                <div class="podium-avatar">ü•â</div>
                                <div class="podium-name">-</div>
                                <div class="podium-score">0 pts</div>
                                <div class="podium-bar"></div>
                                <div class="podium-position">3</div>
                            </div>
                        </div>

                        <!-- Confetes -->
                        <div class="confetti-container" id="confetti"></div>
                    </div>
                </div>

                <!-- ============================================== -->
                <!-- TELA 9: LEADERBOARD FINAL -->
                <!-- ============================================== -->
                <div id="screen-leaderboard" class="screen">
                    <div class="leaderboard-container">
                        <h2 class="leaderboard-title">üéâ Ranking Final üéâ</h2>

                        <div class="game-stats" id="game-stats">
                            <!-- Estat√≠sticas do jogo -->
                        </div>

                        <div class="leaderboard-scroll">
                            <ol class="leaderboard-list" id="leaderboard-list">
                                <!-- Rankings ser√£o inseridos via JS -->
                            </ol>
                        </div>

                        <div class="final-actions">
                            <button id="btn-play-again" class="btn-primary filled large">
                                üîÑ Jogar Novamente
                            </button>
                            <p class="final-message">Obrigado por jogar! üéâ</p>
                        </div>
                    </div>
                </div>

                <!-- ============================================== -->
                <!-- OVERLAY DE CONEX√ÉO -->
                <!-- ============================================== -->
                <div id="connection-overlay" class="overlay hidden">
                    <div class="overlay-content">
                        <div class="spinner"></div>
                        <p>Reconectando...</p>
                    </div>
                </div>
            </div> <!-- End .content -->
        </div>

        <!-- JavaScript -->
        <script src="/js/app.js"></script>
</body>

</html>
